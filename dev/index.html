<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Serialize vctrs Objects to JSON â€¢ cereal</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet">
<link href="deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Serialize vctrs Objects to JSON">
<meta name="description" content="The vctrs package provides a concept of vector prototype that can be especially useful when deploying models and code. Serialize these object prototypes to JSON so they can be used to check and coerce data in production systems, and deserialize JSON back to the correct object prototypes.">
<meta property="og:description" content="The vctrs package provides a concept of vector prototype that can be especially useful when deploying models and code. Serialize these object prototypes to JSON so they can be used to check and coerce data in production systems, and deserialize JSON back to the correct object prototypes.">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">cereal</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/cereal/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="cereal-">cereal ðŸ¥£<a class="anchor" aria-label="anchor" href="#cereal-"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of cereal is to provide methods to <a href="https://en.wikipedia.org/wiki/Serialization" class="external-link">serialize</a> objects from <a href="https://vctrs.r-lib.org/" class="external-link">vctrs</a> to <a href="https://en.wikipedia.org/wiki/JSON" class="external-link">JSON</a>, as well as back from JSON to vctrs objects.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the released version of vetiver from <a href="https://CRAN.R-project.org" class="external-link">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"cereal"</span><span class="op">)</span></span></code></pre></div>
<p>You can install the development version of cereal from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"r-lib/cereal"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>A data frame is a rectangular collection of variables (in the columns) and observations (in the rows). Each variable is a vector of one data type, like factor or datetime:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.2</span>, <span class="fl">2.3</span>, <span class="fl">3.4</span><span class="op">)</span>,</span>
<span>  b <span class="op">=</span> <span class="fl">2L</span><span class="op">:</span><span class="fl">4L</span>,</span>
<span>  c <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0</span><span class="op">:</span><span class="fl">2</span>,</span>
<span>  d <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"2019-01-01"</span>, tz <span class="op">=</span> <span class="st">"America/New_York"</span><span class="op">)</span> <span class="op">+</span> <span class="fl">100</span><span class="op">:</span><span class="fl">102</span>,</span>
<span>  e <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">letters</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  f <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"blue"</span>, <span class="st">"green"</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"green"</span>, <span class="st">"red"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  g <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">ordered</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"small"</span>, <span class="st">"large"</span>, <span class="st">"medium"</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"small"</span>, <span class="st">"medium"</span>, <span class="st">"large"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span></span>
<span><span class="co">#&gt; # A tibble: 3 Ã— 7</span></span>
<span><span class="co">#&gt;       a     b c          d                   e     f     g     </span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt; &lt;date&gt;     &lt;dttm&gt;              &lt;chr&gt; &lt;fct&gt; &lt;ord&gt; </span></span>
<span><span class="co">#&gt; 1   1.2     2 2023-06-09 2019-01-01 00:01:40 b     blue  small </span></span>
<span><span class="co">#&gt; 2   2.3     3 2023-06-10 2019-01-01 00:01:41 p     blue  large </span></span>
<span><span class="co">#&gt; 3   3.4     4 2023-06-11 2019-01-01 00:01:42 k     green medium</span></span></code></pre></div>
<p>The vctrs package has a <a href="https://vctrs.r-lib.org/articles/type-size.html" class="external-link">concept of a <strong>vector prototype</strong></a> which captures the metadata associated with a vector without keeping any of the data itself.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">vctrs</span><span class="fu">::</span><span class="fu"><a href="https://vctrs.r-lib.org/reference/vec_ptype.html" class="external-link">vec_ptype</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 0 Ã— 7</span></span>
<span><span class="co">#&gt; # â„¹ 7 variables: a &lt;dbl&gt;, b &lt;int&gt;, c &lt;date&gt;, d &lt;dttm&gt;, e &lt;chr&gt;, f &lt;fct&gt;,</span></span>
<span><span class="co">#&gt; #   g &lt;ord&gt;</span></span></code></pre></div>
<p>The information stored in such a vector prototype includes, for example, the levels of a factor and the timezone for a datetime. This can be useful or important information when deploying code or models, such as when using <a href="https://vetiver.rstudio.com/" class="external-link">vetiver</a>. We could store this vector prototype as an R binary object saved as an <code>.rds</code> file, but with cereal, you can store this vector prototype in plain text as JSON:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-lib.github.io/cereal/" class="external-link">cereal</a></span><span class="op">)</span></span>
<span><span class="va">json</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cereal_to_json.html">cereal_to_json</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="va">json</span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;   "a": {</span></span>
<span><span class="co">#&gt;     "type": "numeric",</span></span>
<span><span class="co">#&gt;     "example": "1.2",</span></span>
<span><span class="co">#&gt;     "details": []</span></span>
<span><span class="co">#&gt;   },</span></span>
<span><span class="co">#&gt;   "b": {</span></span>
<span><span class="co">#&gt;     "type": "integer",</span></span>
<span><span class="co">#&gt;     "example": "2",</span></span>
<span><span class="co">#&gt;     "details": []</span></span>
<span><span class="co">#&gt;   },</span></span>
<span><span class="co">#&gt;   "c": {</span></span>
<span><span class="co">#&gt;     "type": "Date",</span></span>
<span><span class="co">#&gt;     "example": "2023-06-09",</span></span>
<span><span class="co">#&gt;     "details": []</span></span>
<span><span class="co">#&gt;   },</span></span>
<span><span class="co">#&gt;   "d": {</span></span>
<span><span class="co">#&gt;     "type": "POSIXct",</span></span>
<span><span class="co">#&gt;     "example": "2019-01-01 00:01:40",</span></span>
<span><span class="co">#&gt;     "details": {</span></span>
<span><span class="co">#&gt;       "tzone": "America/New_York"</span></span>
<span><span class="co">#&gt;     }</span></span>
<span><span class="co">#&gt;   },</span></span>
<span><span class="co">#&gt;   "e": {</span></span>
<span><span class="co">#&gt;     "type": "character",</span></span>
<span><span class="co">#&gt;     "example": "b",</span></span>
<span><span class="co">#&gt;     "details": []</span></span>
<span><span class="co">#&gt;   },</span></span>
<span><span class="co">#&gt;   "f": {</span></span>
<span><span class="co">#&gt;     "type": "factor",</span></span>
<span><span class="co">#&gt;     "example": "blue",</span></span>
<span><span class="co">#&gt;     "details": {</span></span>
<span><span class="co">#&gt;       "levels": ["blue", "green", "red"]</span></span>
<span><span class="co">#&gt;     }</span></span>
<span><span class="co">#&gt;   },</span></span>
<span><span class="co">#&gt;   "g": {</span></span>
<span><span class="co">#&gt;     "type": "ordered",</span></span>
<span><span class="co">#&gt;     "example": "small",</span></span>
<span><span class="co">#&gt;     "details": {</span></span>
<span><span class="co">#&gt;       "levels": ["small", "medium", "large"]</span></span>
<span><span class="co">#&gt;     }</span></span>
<span><span class="co">#&gt;   }</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
<p>Storing prototype information as JSON (rather than a binary file) means it can be used as plain-text metadata for a model.</p>
<p>You can also convert from JSON back to the original prototype:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/cereal_to_json.html">cereal_from_json</a></span><span class="op">(</span><span class="va">json</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 0 Ã— 7</span></span>
<span><span class="co">#&gt; # â„¹ 7 variables: a &lt;dbl&gt;, b &lt;int&gt;, c &lt;date&gt;, d &lt;dttm&gt;, e &lt;chr&gt;, f &lt;fct&gt;,</span></span>
<span><span class="co">#&gt; #   g &lt;ord&gt;</span></span></code></pre></div>
<p>For an approach to this same task using Python, <a href="https://docs.pydantic.dev/latest/usage/exporting_models/#modeljson" class="external-link">see Pydanticâ€™s <code>model.json()</code></a>.</p>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<ul>
<li><p>This project is released with a <a href="https://www.contributor-covenant.org/version/2/1/CODE_OF_CONDUCT.html" class="external-link">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p></li>
<li><p>If you think you have encountered a bug, please <a href="https://github.com/r-lib/cereal/issues" class="external-link">submit an issue</a>.</p></li>
<li><p>Either way, learn how to create and share a <a href="https://reprex.tidyverse.org/articles/articles/learn-reprex.html" class="external-link">reprex</a> (a minimal, reproducible example), to clearly communicate about your code.</p></li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=cereal" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/r-lib/cereal/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/r-lib/cereal/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing cereal</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://juliasilge.com/" class="external-link">Julia Silge</a> <br><small class="roles"> Maintainer, author </small> <a href="https://orcid.org/0000-0002-3671-836X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>
<a href="https://github.com/DavisVaughan" class="external-link">Davis Vaughan</a> <br><small class="roles"> Author </small>   </li>
<li>
<a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a> <br><small class="roles"> Copyright holder, funder </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/r-lib/cereal/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/r-lib/cereal/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://CRAN.R-project.org/package=cereal" class="external-link"><img src="https://www.r-pkg.org/badges/version/cereal" alt="CRAN status"></a></li>
<li><a href="https://app.codecov.io/gh/r-lib/cereal?branch=main" class="external-link"><img src="https://codecov.io/gh/r-lib/cereal/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>

  </aside>
</div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://juliasilge.com/" class="external-link">Julia Silge</a>, <a href="https://github.com/DavisVaughan" class="external-link">Davis Vaughan</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer>
</body>
</html>
